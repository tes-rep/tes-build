name: Tes Notif Telegram

on:
  workflow_dispatch:  # Bisa dipicu manual dari tab Actions

jobs:
  test-notif:
    runs-on: ubuntu-latest
    steps:
      - name: Kirim pesan tes 1 (info)
        run: |
          MSG="â„¹ï¸ <b>Tidak ada versi baru</b>\n\nğŸ“Œ Versi terakhir: <b>v0.46.064</b>\nğŸ”— <a href='https://github.com/tes-rep/OpenClash/releases/tag/v0.46.064'>Release</a>"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -d text="$MSG" \
            -d parse_mode="HTML"

      - name: Kirim pesan tes 2 (build dimulai)
        run: |
          MSG="âš¡ <b>Build OpenClash dimulai...</b>\n\nğŸ“Œ Versi baru: <b>v0.46.065</b>\nğŸ“Œ Versi lama: <b>v0.46.064</b>\n\nHarap tunggu beberapa menit ğŸš€"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -d text="$MSG" \
            -d parse_mode="HTML"

      - name: Kirim pesan tes 3 (build selesai)
        run: |
          MSG="âœ… <b>Build OpenClash Selesai!</b>\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“Œ Versi baru: <b>v0.46.065</b>\nğŸ•’ Start: 2025-08-18 12:10:33 WIB\nâ± Durasi: 3m 42s\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ”— <a href='https://github.com/tes-rep/OpenClash/releases/tag/v0.46.065'>Release</a>\nğŸ“¦ <a href='https://github.com/tes-rep/OpenClash/releases/download/v0.46.065/luci-app-openclash_v0.46.065_all.ipk'>IPK</a>\nğŸ“± <a href='https://github.com/tes-rep/OpenClash/releases/download/v0.46.065/luci-app-openclash-v0.46.065.apk'>APK</a>"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -d text="$MSG" \
            -d parse_mode="HTML"
